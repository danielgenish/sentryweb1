(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-617979f6"],{"014e":function(e,t,a){"use strict";a.d(t,"a",(function(){return O}));var o=a("23f9"),l=a("7a23"),n=a("1fba"),c=a("fa7c"),r=a("e5f6"),i=a("d243"),d=a("9a1c"),s=a("5f24"),u=a("5913"),b=a("eec6");const[f,g]=Object(n["a"])("action-sheet"),p=Object(c["a"])({},b["b"],{title:String,round:r["g"],actions:Object(r["a"])(),closeIcon:Object(r["e"])("cross"),closeable:r["g"],cancelText:String,description:String,closeOnPopstate:r["g"],closeOnClickAction:Boolean,safeAreaInsetBottom:r["g"]}),m=[...b["a"],"round","closeOnPopstate","safeAreaInsetBottom"];var j=Object(l["defineComponent"])({name:f,props:p,emits:["select","cancel","update:show"],setup(e,{slots:t,emit:a}){const o=e=>a("update:show",e),n=()=>{o(!1),a("cancel")},r=()=>{if(e.title)return Object(l["createVNode"])("div",{class:g("header")},[e.title,e.closeable&&Object(l["createVNode"])(d["a"],{name:e.closeIcon,class:[g("close"),i["h"]],onClick:n},null)])},b=()=>{if(t.cancel||e.cancelText)return[Object(l["createVNode"])("div",{class:g("gap")},null),Object(l["createVNode"])("button",{type:"button",class:g("cancel"),onClick:n},[t.cancel?t.cancel():e.cancelText])]},f=(e,a)=>e.loading?Object(l["createVNode"])(u["a"],{class:g("loading-icon")},null):t.action?t.action({action:e,index:a}):[Object(l["createVNode"])("span",{class:g("name")},[e.name]),e.subname&&Object(l["createVNode"])("div",{class:g("subname")},[e.subname])],p=(t,n)=>{const{color:c,loading:r,callback:i,disabled:d,className:s}=t,u=()=>{d||r||(i&&i(t),e.closeOnClickAction&&o(!1),Object(l["nextTick"])(()=>a("select",t,n)))};return Object(l["createVNode"])("button",{type:"button",style:{color:c},class:[g("item",{loading:r,disabled:d}),s],onClick:u},[f(t,n)])},j=()=>{if(e.description||t.description){const a=t.description?t.description():e.description;return Object(l["createVNode"])("div",{class:g("description")},[a])}};return()=>Object(l["createVNode"])(s["a"],Object(l["mergeProps"])({class:g(),position:"bottom","onUpdate:show":o},Object(c["l"])(e,m)),{default:()=>{var a;return[r(),j(),Object(l["createVNode"])("div",{class:g("content")},[e.actions.map(p),null==(a=t.default)?void 0:a.call(t)]),b()]}})}});const O=Object(o["a"])(j)},1146:function(e,t,a){},"21a7":function(e,t,a){"use strict";a("68ef"),a("cb51"),a("3743"),a("1a04"),a("1146")},"22fa":function(e,t,a){"use strict";a("68ef"),a("cb51"),a("3743"),a("e3b3"),a("bc1b")},"4d86":function(e,t,a){"use strict";a("68ef"),a("5c56")},"5c56":function(e,t,a){},"72ff":function(e,t,a){"use strict";a("68ef"),a("e3b3"),a("d9d2")},"7b2f":function(e,t,a){"use strict";a.r(t);var o=a("e31f"),l=(a("72ff"),a("a136")),n=(a("4d86"),a("014e")),c=(a("9c05"),a("5f24")),r=(a("ac6b"),a("f23a")),i=(a("21a7"),a("2e1b")),d=(a("22fa"),a("6c44")),s=(a("aa5a"),a("9a1c")),u=(a("89a0"),a("7a23")),b={__name:"StorageSettingsView",setup(e){const t=Object(u["ref"])(!1),a=Object(u["ref"])(!1),b=Object(u["ref"])(!1),f=Object(u["ref"])(!1),g=Object(u["ref"])(!1),p=Object(u["ref"])(!1),m=Object(u["ref"])(!1),j=Object(u["ref"])(!1),O=Object(u["ref"])([{name:"选项一",value:"/sdfdfd/sdfaf"},{name:"选项二",value:"/sdfdfd/saaaaaaafdf"},{name:"选项三",value:"/saaaaaaaaaaaaa"}]);function v(e){h(e.value)}function h(e){C.value.tfCardRootPath=e;try{window.androidFunction.setStringSetting("tfCardRootPath",C.value.tfCardRootPath,"/storage/sdcard/360Videos")}catch(t){}}function V(){try{window.androidFunction.setStringSetting("videosDirPath",C.value.videosDirPath,"360Videos")}catch(e){}}const C=Object(u["ref"])({tfCardRootPath:"",videosDirPath:"",sdCardManager:!0,sdCardLimit:20,sdCardRem:5,tfCardManager:!0,tfCardLimit:20,tfCardRem:5,jlyManager:!0,jlyLimit:20,keepToday:!0});function w(){try{let e=window.androidFunction.getStorageSettings();C.value=JSON.parse(e)}catch(e){}}function y(e,t){try{window.androidFunction.setBoolSetting(e,t,!1)}catch(a){}}function x(e,t,a){console.log("set "+e+" to "+t);try{window.androidFunction.setIntSetting(e,parseInt(t),a)}catch(o){}}function N(){try{let e=window.androidFunction.getStorageList();O.value=JSON.parse(e)}catch(e){}}return Object(u["onMounted"])(()=>{w(),N()}),(e,w)=>{const N=s["a"],k=d["a"],S=i["a"],B=r["a"],M=c["a"],T=n["a"],_=l["a"],L=o["a"];return Object(u["openBlock"])(),Object(u["createElementBlock"])("main",null,[Object(u["createVNode"])(_,{inset:"",style:{"margin-top":"20px"}},{default:Object(u["withCtx"])(()=>[Object(u["createVNode"])(k,{center:"",label:"路径："+C.value.tfCardRootPath,onClick:w[0]||(w[0]=e=>p.value=!0),"is-link":""},{title:Object(u["withCtx"])(()=>[Object(u["createTextVNode"])(" 外部存储根目录 ")]),"right-icon":Object(u["withCtx"])(()=>[Object(u["createVNode"])(N,{name:"arrow"})]),_:1},8,["label"]),Object(u["createVNode"])(M,{show:p.value,"onUpdate:show":w[4]||(w[4]=e=>p.value=e),round:""},{default:Object(u["withCtx"])(()=>[Object(u["createVNode"])(B,{name:"slider",modelValue:C.value.tfCardRootPath,"onUpdate:modelValue":w[2]||(w[2]=e=>C.value.tfCardRootPath=e),label:"根目录",style:{margin:"10px 0",padding:"20px","padding-right":"30px"},onChange:w[3]||(w[3]=e=>h(C.value.tfCardRootPath))},{button:Object(u["withCtx"])(()=>[Object(u["createVNode"])(S,{size:"small",type:"primary",onClick:w[1]||(w[1]=e=>m.value=!0)},{default:Object(u["withCtx"])(()=>[Object(u["createTextVNode"])("选择")]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["show"]),Object(u["createVNode"])(T,{show:m.value,"onUpdate:show":w[5]||(w[5]=e=>m.value=e),actions:O.value,"cancel-text":"取消","close-on-click-action":"",onSelect:v},null,8,["show","actions"])]),_:1}),Object(u["createVNode"])(_,{inset:"",style:{"margin-top":"20px"}},{default:Object(u["withCtx"])(()=>[Object(u["createVNode"])(k,{center:"",label:"文件夹："+C.value.videosDirPath,onClick:w[6]||(w[6]=e=>j.value=!0),"is-link":""},{title:Object(u["withCtx"])(()=>[Object(u["createTextVNode"])(" 视频文件夹 ")]),"right-icon":Object(u["withCtx"])(()=>[Object(u["createVNode"])(N,{name:"arrow"})]),_:1},8,["label"]),Object(u["createVNode"])(M,{show:j.value,"onUpdate:show":w[8]||(w[8]=e=>j.value=e),round:""},{default:Object(u["withCtx"])(()=>[Object(u["createVNode"])(B,{name:"slider",modelValue:C.value.videosDirPath,"onUpdate:modelValue":w[7]||(w[7]=e=>C.value.videosDirPath=e),label:"文件夹",style:{margin:"20px 0",padding:"20px","padding-right":"30px"},onChange:V},null,8,["modelValue"])]),_:1},8,["show"])]),_:1}),Object(u["createVNode"])(_,{inset:"",style:{"margin-top":"20px"}},{default:Object(u["withCtx"])(()=>[Object(u["createVNode"])(k,{title:"内部存储空间管理",label:"是否开启对内置存储空间的管理",center:"","is-link":""},{"right-icon":Object(u["withCtx"])(()=>[Object(u["createVNode"])(L,{modelValue:C.value.sdCardManager,"onUpdate:modelValue":w[9]||(w[9]=e=>C.value.sdCardManager=e),onChange:w[10]||(w[10]=e=>y("sdCardManager",C.value.sdCardManager))},null,8,["modelValue"])]),_:1}),C.value.sdCardManager?(Object(u["openBlock"])(),Object(u["createBlock"])(k,{key:0,onClick:w[11]||(w[11]=e=>f.value=!0),title:"存储空间使用限制",label:"智能守卫所有的录制模式下录制的视频在内部存储空间上允许使用的存储最大值，当占用超出最大值时，将按照录制日期（所有的录制模式）进行视频的删除",center:"","is-link":""},{"right-icon":Object(u["withCtx"])(()=>[Object(u["createTextVNode"])(Object(u["toDisplayString"])(C.value.sdCardLimit)+"GB ",1),Object(u["createVNode"])(N,{name:"arrow"})]),_:1})):Object(u["createCommentVNode"])("",!0),Object(u["createVNode"])(M,{show:f.value,"onUpdate:show":w[14]||(w[14]=e=>f.value=e),round:""},{default:Object(u["withCtx"])(()=>[Object(u["createVNode"])(B,{type:"digit",max:1e3,modelValue:C.value.sdCardLimit,"onUpdate:modelValue":w[12]||(w[12]=e=>C.value.sdCardLimit=e),label:"限制大小（GB）",style:{margin:"20px 0",padding:"20px","padding-right":"30px"},onChange:w[13]||(w[13]=e=>x("sdCardLimit",C.value.sdCardLimit,20))},null,8,["modelValue"])]),_:1},8,["show"]),C.value.sdCardManager?(Object(u["openBlock"])(),Object(u["createBlock"])(k,{key:1,onClick:w[15]||(w[15]=e=>g.value=!0),title:"预留空间大小",label:"当内部存储可用空间小于该选项设置值时，将按照录制日期（所有的录制模式）进行视频的删除",center:"","is-link":""},{"right-icon":Object(u["withCtx"])(()=>[Object(u["createTextVNode"])(Object(u["toDisplayString"])(C.value.sdCardRem)+"GB ",1),Object(u["createVNode"])(N,{name:"arrow"})]),_:1})):Object(u["createCommentVNode"])("",!0),Object(u["createVNode"])(M,{show:g.value,"onUpdate:show":w[18]||(w[18]=e=>g.value=e),round:""},{default:Object(u["withCtx"])(()=>[Object(u["createVNode"])(B,{type:"digit",max:1e3,modelValue:C.value.sdCardRem,"onUpdate:modelValue":w[16]||(w[16]=e=>C.value.sdCardRem=e),label:"预留空间大小（GB）",style:{margin:"20px 0",padding:"20px","padding-right":"30px"},onChange:w[17]||(w[17]=e=>x("sdCardRem",C.value.sdCardRem,5))},null,8,["modelValue"])]),_:1},8,["show"])]),_:1}),Object(u["createVNode"])(_,{inset:"",style:{"margin-top":"20px"}},{default:Object(u["withCtx"])(()=>[Object(u["createVNode"])(k,{title:"外部存储空间管理",label:"是否开启对外部存储空间的管理",center:"","is-link":""},{"right-icon":Object(u["withCtx"])(()=>[Object(u["createVNode"])(L,{modelValue:C.value.tfCardManager,"onUpdate:modelValue":w[19]||(w[19]=e=>C.value.tfCardManager=e),onChange:w[20]||(w[20]=e=>y("tfCardManager",C.value.tfCardManager))},null,8,["modelValue"])]),_:1}),C.value.tfCardManager?(Object(u["openBlock"])(),Object(u["createBlock"])(k,{key:0,onClick:w[21]||(w[21]=e=>a.value=!0),title:"外部存储使用限制",label:"智能守卫所有的录制模式下录制的视频在外部存储空间上允许使用的存储最大值，超出最大值时，将按照录制日期（所有的录制模式）进行视频的删除",center:"","is-link":""},{"right-icon":Object(u["withCtx"])(()=>[Object(u["createTextVNode"])(Object(u["toDisplayString"])(C.value.tfCardLimit)+"GB ",1),Object(u["createVNode"])(N,{name:"arrow"})]),_:1})):Object(u["createCommentVNode"])("",!0),Object(u["createVNode"])(M,{show:a.value,"onUpdate:show":w[24]||(w[24]=e=>a.value=e),round:""},{default:Object(u["withCtx"])(()=>[Object(u["createVNode"])(B,{type:"digit",max:1e3,modelValue:C.value.tfCardLimit,"onUpdate:modelValue":w[22]||(w[22]=e=>C.value.tfCardLimit=e),label:"限制大小（GB）",style:{margin:"20px 0",padding:"20px","padding-right":"30px"},onChange:w[23]||(w[23]=e=>x("tfCardLimit",C.value.tfCardLimit,20))},null,8,["modelValue"])]),_:1},8,["show"]),C.value.tfCardManager?(Object(u["openBlock"])(),Object(u["createBlock"])(k,{key:1,onClick:w[25]||(w[25]=e=>b.value=!0),title:"预留空间大小",label:"当外部存储可用空间小于该选项设置值时，将按照录制日期（所有的录制模式）进行视频的删除",center:"","is-link":""},{"right-icon":Object(u["withCtx"])(()=>[Object(u["createTextVNode"])(Object(u["toDisplayString"])(C.value.tfCardRem)+"GB ",1),Object(u["createVNode"])(N,{name:"arrow"})]),_:1})):Object(u["createCommentVNode"])("",!0),Object(u["createVNode"])(M,{show:b.value,"onUpdate:show":w[28]||(w[28]=e=>b.value=e),round:""},{default:Object(u["withCtx"])(()=>[Object(u["createVNode"])(B,{type:"digit",max:1e3,modelValue:C.value.tfCardRem,"onUpdate:modelValue":w[26]||(w[26]=e=>C.value.tfCardRem=e),label:"预留空间大小（GB）",style:{margin:"20px 0",padding:"20px","padding-right":"30px"},onChange:w[27]||(w[27]=e=>x("tfCardRem",C.value.tfCardRem,5))},null,8,["modelValue"])]),_:1},8,["show"]),C.value.tfCardManager?(Object(u["openBlock"])(),Object(u["createBlock"])(k,{key:2,title:"管理自带行车记录仪视频数据",label:"对自带行车记录仪的视频进行删除，避免自带记录仪侵占过多的外部存储空间",center:"","is-link":""},{"right-icon":Object(u["withCtx"])(()=>[Object(u["createVNode"])(L,{modelValue:C.value.jlyManager,"onUpdate:modelValue":w[29]||(w[29]=e=>C.value.jlyManager=e),onChange:w[30]||(w[30]=e=>y("jlyManager",C.value.jlyManager))},null,8,["modelValue"])]),_:1})):Object(u["createCommentVNode"])("",!0),Object(u["createVNode"])(k,{onClick:w[31]||(w[31]=e=>t.value=!0),title:"自带行车记录仪存储使用限制",label:"自带行车记录仪录制的视频在内部存储空间上允许使用的存储最大值，超出后将按照录制日期进行视频的删除，单位GB",center:"","is-link":""},{"right-icon":Object(u["withCtx"])(()=>[Object(u["createTextVNode"])(Object(u["toDisplayString"])(C.value.jlyLimit)+"GB ",1),Object(u["createVNode"])(N,{name:"arrow"})]),_:1}),Object(u["createVNode"])(M,{show:t.value,"onUpdate:show":w[34]||(w[34]=e=>t.value=e),round:""},{default:Object(u["withCtx"])(()=>[Object(u["createVNode"])(B,{type:"digit",max:1e3,modelValue:C.value.jlyLimit,"onUpdate:modelValue":w[32]||(w[32]=e=>C.value.jlyLimit=e),label:"限制大小（GB）",style:{margin:"20px 0",padding:"20px","padding-right":"30px"},onChange:w[33]||(w[33]=e=>x("jlyLimit",C.value.jlyLimit,20))},null,8,["modelValue"])]),_:1},8,["show"])]),_:1})])}}};const f=b;t["default"]=f},8400:function(e,t,a){},"9c05":function(e,t,a){"use strict";a("68ef"),a("cb51"),a("3743"),a("e3b3"),a("a71a"),a("4d75"),a("8400")},a136:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var o=a("23f9"),l=a("7a23"),n=a("1fba"),c=a("e5f6"),r=a("d243"),i=a("0baf");const[d,s]=Object(n["a"])("cell-group"),u={title:String,inset:Boolean,border:c["g"]};var b=Object(l["defineComponent"])({name:d,inheritAttrs:!1,props:u,setup(e,{slots:t,attrs:a}){const o=()=>{var o;return Object(l["createVNode"])("div",Object(l["mergeProps"])({class:[s({inset:e.inset}),{[r["e"]]:e.border&&!e.inset}]},a,Object(i["a"])()),[null==(o=t.default)?void 0:o.call(t)])},n=()=>Object(l["createVNode"])("div",{class:s("title",{inset:e.inset})},[t.title?t.title():e.title]);return()=>e.title||t.title?Object(l["createVNode"])(l["Fragment"],null,[n(),o()]):o()}});const f=Object(o["a"])(b)},bc1b:function(e,t,a){},d9d2:function(e,t,a){},e31f:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var o=a("23f9"),l=a("7a23"),n=a("1fba"),c=a("e5f6"),r=a("5aa0"),i=a("450f"),d=a("5913");const[s,u]=Object(n["a"])("switch"),b={size:c["f"],loading:Boolean,disabled:Boolean,modelValue:c["h"],activeColor:String,inactiveColor:String,activeValue:{type:c["h"],default:!0},inactiveValue:{type:c["h"],default:!1}};var f=Object(l["defineComponent"])({name:s,props:b,emits:["change","update:modelValue"],setup(e,{emit:t,slots:a}){const o=()=>e.modelValue===e.activeValue,n=()=>{if(!e.disabled&&!e.loading){const a=o()?e.inactiveValue:e.activeValue;t("update:modelValue",a),t("change",a)}},c=()=>{if(e.loading){const t=o()?e.activeColor:e.inactiveColor;return Object(l["createVNode"])(d["a"],{class:u("loading"),color:t},null)}if(a.node)return a.node()};return Object(i["useCustomFieldValue"])(()=>e.modelValue),()=>{var t;const{size:i,loading:d,disabled:s,activeColor:b,inactiveColor:f}=e,g=o(),p={fontSize:Object(r["b"])(i),backgroundColor:g?b:f};return Object(l["createVNode"])("div",{role:"switch",class:u({on:g,loading:d,disabled:s}),style:p,tabindex:s?void 0:0,"aria-checked":g,onClick:n},[Object(l["createVNode"])("div",{class:u("node")},[c()]),null==(t=a.background)?void 0:t.call(a)])}}});const g=Object(o["a"])(f)},f23a:function(e,t,a){"use strict";a.d(t,"a",(function(){return _}));var o=a("23f9"),l=a("7a23"),n=a("1fba"),c=a("e5f6"),r=a("fa7c"),i=a("d243"),d=a("5aa0"),s=a("8db7");function u(e){return Array.isArray(e)?!e.length:0!==e&&!e}function b(e,t){if(u(e)){if(t.required)return!1;if(!1===t.validateEmpty)return!0}return!(t.pattern&&!t.pattern.test(String(e)))}function f(e,t){return new Promise(a=>{const o=t.validator(e,t);Object(r["i"])(o)?o.then(a):a(o)})}function g(e,t){const{message:a}=t;return Object(r["e"])(a)?a(e,t):a||""}function p({target:e}){e.composing=!0}function m({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function j(e,t){const a=Object(s["b"])();e.style.height="auto";let o=e.scrollHeight;if(Object(r["h"])(t)){const{maxHeight:e,minHeight:a}=t;void 0!==e&&(o=Math.min(o,e)),void 0!==a&&(o=Math.max(o,a))}o&&(e.style.height=o+"px",Object(s["g"])(a))}function O(e){return"number"===e?{type:"text",inputmode:"decimal"}:"digit"===e?{type:"tel",inputmode:"numeric"}:{type:e}}function v(e){return[...e].length}function h(e,t){return[...e].slice(0,t).join("")}var V=a("3d6b"),C=a("450f"),w=a("05df"),y=a("efd9"),x=a("9a1c"),N=a("6c44");const[k,S]=Object(n["a"])("field"),B={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:c["f"],formatter:Function,clearIcon:Object(c["e"])("clear"),modelValue:Object(c["c"])(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:Object(c["e"])("focus"),formatTrigger:Object(c["e"])("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},M=Object(r["a"])({},V["a"],B,{rows:c["f"],type:Object(c["e"])("text"),rules:Array,autosize:[Boolean,Object],labelWidth:c["f"],labelClass:c["h"],labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var T=Object(l["defineComponent"])({name:k,props:M,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:t,slots:a}){const o=Object(w["a"])(),n=Object(l["reactive"])({status:"unvalidated",focused:!1,validateMessage:""}),c=Object(l["ref"])(),V=Object(l["ref"])(),k=Object(l["ref"])(),{parent:B}=Object(C["useParent"])(i["g"]),M=()=>{var t;return String(null!=(t=e.modelValue)?t:"")},T=t=>Object(r["d"])(e[t])?e[t]:B&&Object(r["d"])(B.props[t])?B.props[t]:void 0,_=Object(l["computed"])(()=>{const t=T("readonly");if(e.clearable&&!t){const t=""!==M(),a="always"===e.clearTrigger||"focus"===e.clearTrigger&&n.focused;return t&&a}return!1}),L=Object(l["computed"])(()=>k.value&&a.input?k.value():e.modelValue),P=Object(l["computed"])(()=>{var t;const a=T("required");return"auto"===a?null==(t=e.rules)?void 0:t.some(e=>e.required):a}),I=e=>e.reduce((e,t)=>e.then(()=>{if("failed"===n.status)return;let{value:e}=L;if(t.formatter&&(e=t.formatter(e,t)),!b(e,t))return n.status="failed",void(n.validateMessage=g(e,t));if(t.validator){if(u(e)&&!1===t.validateEmpty)return;return f(e,t).then(a=>{a&&"string"===typeof a?(n.status="failed",n.validateMessage=a):!1===a&&(n.status="failed",n.validateMessage=g(e,t))})}}),Promise.resolve()),R=()=>{n.status="unvalidated",n.validateMessage=""},U=()=>t("endValidate",{status:n.status,message:n.validateMessage}),A=(a=e.rules)=>new Promise(o=>{R(),a?(t("startValidate"),I(a).then(()=>{"failed"===n.status?(o({name:e.name,message:n.validateMessage}),U()):(n.status="passed",o(),U())})):o()}),E=t=>{if(B&&e.rules){const{validateTrigger:a}=B.props,o=Object(r["m"])(a).includes(t),l=e.rules.filter(e=>e.trigger?Object(r["m"])(e.trigger).includes(t):o);l.length&&A(l)}},D=t=>{var a;const{maxlength:o}=e;if(Object(r["d"])(o)&&v(t)>+o){const e=M();if(e&&v(e)===+o)return e;const l=null==(a=c.value)?void 0:a.selectionEnd;if(n.focused&&l){const e=[...t],a=e.length-+o;return e.splice(l-a,a),e.join("")}return h(t,+o)}return t},z=(a,o="onChange")=>{const l=a;a=D(a);const i=v(l)-v(a);if("number"===e.type||"digit"===e.type){const t="number"===e.type;a=Object(d["e"])(a,t,t)}let s=0;if(e.formatter&&o===e.formatTrigger){const{formatter:t,maxlength:o}=e;if(a=t(a),Object(r["d"])(o)&&v(a)>+o&&(a=h(a,+o)),c.value&&n.focused){const{selectionEnd:e}=c.value,a=h(l,e);s=v(t(a))-v(a)}}if(c.value&&c.value.value!==a)if(n.focused){let{selectionStart:e,selectionEnd:t}=c.value;if(c.value.value=a,Object(r["d"])(e)&&Object(r["d"])(t)){const o=v(a);i?(e-=i,t-=i):s&&(e+=s,t+=s),c.value.setSelectionRange(Math.min(e,o),Math.min(t,o))}}else c.value.value=a;a!==e.modelValue&&t("update:modelValue",a)},F=e=>{e.target.composing||z(e.target.value)},G=()=>{var e;return null==(e=c.value)?void 0:e.blur()},W=()=>{var e;return null==(e=c.value)?void 0:e.focus()},J=()=>{const t=c.value;"textarea"===e.type&&e.autosize&&t&&j(t,e.autosize)},q=e=>{n.focused=!0,t("focus",e),Object(l["nextTick"])(J),T("readonly")&&G()},H=e=>{n.focused=!1,z(M(),"onBlur"),t("blur",e),T("readonly")||(E("onBlur"),Object(l["nextTick"])(J),Object(s["f"])())},K=e=>t("clickInput",e),Y=e=>t("clickLeftIcon",e),$=e=>t("clickRightIcon",e),Q=e=>{Object(s["e"])(e),t("update:modelValue",""),t("clear",e)},X=Object(l["computed"])(()=>"boolean"===typeof e.error?e.error:!(!B||!B.props.showError||"failed"!==n.status)||void 0),Z=Object(l["computed"])(()=>{const e=T("labelWidth"),t=T("labelAlign");if(e&&"top"!==t)return{width:Object(d["b"])(e)}}),ee=a=>{const o=13;if(a.keyCode===o){const t=B&&B.props.submitOnEnter;t||"textarea"===e.type||Object(s["e"])(a),"search"===e.type&&G()}t("keypress",a)},te=()=>e.id||o+"-input",ae=()=>n.status,oe=()=>{const t=S("control",[T("inputAlign"),{error:X.value,custom:!!a.input,"min-height":"textarea"===e.type&&!e.autosize}]);if(a.input)return Object(l["createVNode"])("div",{class:t,onClick:K},[a.input()]);const n={id:te(),ref:c,name:e.name,rows:void 0!==e.rows?+e.rows:void 0,class:t,disabled:T("disabled"),readonly:T("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?o+"-label":void 0,onBlur:H,onFocus:q,onInput:F,onClick:K,onChange:m,onKeypress:ee,onCompositionend:m,onCompositionstart:p};return"textarea"===e.type?Object(l["createVNode"])("textarea",n,null):Object(l["createVNode"])("input",Object(l["mergeProps"])(O(e.type),n),null)},le=()=>{const t=a["left-icon"];if(e.leftIcon||t)return Object(l["createVNode"])("div",{class:S("left-icon"),onClick:Y},[t?t():Object(l["createVNode"])(x["a"],{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},ne=()=>{const t=a["right-icon"];if(e.rightIcon||t)return Object(l["createVNode"])("div",{class:S("right-icon"),onClick:$},[t?t():Object(l["createVNode"])(x["a"],{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},ce=()=>{if(e.showWordLimit&&e.maxlength){const t=v(M());return Object(l["createVNode"])("div",{class:S("word-limit")},[Object(l["createVNode"])("span",{class:S("word-num")},[t]),Object(l["createTextVNode"])("/"),e.maxlength])}},re=()=>{if(B&&!1===B.props.showErrorMessage)return;const t=e.errorMessage||n.validateMessage;if(t){const e=a["error-message"],o=T("errorMessageAlign");return Object(l["createVNode"])("div",{class:S("error-message",o)},[e?e({message:t}):t])}},ie=()=>{const t=T("labelWidth"),n=T("labelAlign"),c=T("colon")?":":"";return a.label?[a.label(),c]:e.label?Object(l["createVNode"])("label",{id:o+"-label",for:a.input?void 0:te(),onClick:e=>{Object(s["e"])(e),W()},style:"top"===n&&t?{width:Object(d["b"])(t)}:void 0},[e.label+c]):void 0},de=()=>[Object(l["createVNode"])("div",{class:S("body")},[oe(),_.value&&Object(l["createVNode"])(x["a"],{ref:V,name:e.clearIcon,class:S("clear")},null),ne(),a.button&&Object(l["createVNode"])("div",{class:S("button")},[a.button()])]),ce(),re()];return Object(y["a"])({blur:G,focus:W,validate:A,formValue:L,resetValidation:R,getValidationStatus:ae}),Object(l["provide"])(C["CUSTOM_FIELD_INJECTION_KEY"],{customValue:k,resetValidation:R,validateWithTrigger:E}),Object(l["watch"])(()=>e.modelValue,()=>{z(M()),R(),E("onChange"),Object(l["nextTick"])(J)}),Object(l["onMounted"])(()=>{z(M(),e.formatTrigger),Object(l["nextTick"])(J)}),Object(C["useEventListener"])("touchstart",Q,{target:Object(l["computed"])(()=>{var e;return null==(e=V.value)?void 0:e.$el})}),()=>{const t=T("disabled"),o=T("labelAlign"),n=le(),c=()=>{const e=ie();return"top"===o?[n,e].filter(Boolean):e||[]};return Object(l["createVNode"])(N["a"],{size:e.size,class:S({error:X.value,disabled:t,["label-"+o]:o}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:Z.value,valueClass:S("value"),titleClass:[S("label",[o,{required:P.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:n&&"top"!==o?()=>n:null,title:c,value:de,extra:a.extra})}}});const _=Object(o["a"])(T)}}]);